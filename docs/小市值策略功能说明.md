# 小市值策略功能说明

## 📊 功能概述

"小市值策略"是专注于小盘高成长股票的选股策略，通过严格的财务指标筛选，挖掘市值小、成长性强的优质股票。

## 🎯 筛选条件

### 核心指标

| 指标 | 条件 | 说明 |
|------|------|------|
| 总市值 | ≤ 50亿 | 小盘股票，成长空间大 |
| 营收增长率 | ≥ 10% | 营业收入持续增长 |
| 净利润增长率 | ≥ 100% | 利润高速增长 |
| 市场范围 | 沪深A股 | 仅限A股市场 |
| ST股票 | 排除 | 避免风险股票 |
| 创业板 | 排除 | 聚焦主板和中小板 |
| 科创板 | 排除 | 避免高估值板块 |

### 排序规则

按**总市值由小到大**排序，优先选择最小盘的股票。

## 💰 量化交易策略

### 资金管理

| 参数 | 设置 | 说明 |
|------|------|------|
| 资金量 | 10万元 | 初始投资金额 |
| 交易仓位 | 满仓 | 100%仓位运作 |
| 个股最大持仓 | 30% | 单只股票最多3万元 |
| 账户最大持股数 | 4只 | 分散风险 |
| 单日最大买入数 | 2只 | 控制买入节奏 |

### 买卖时机

**买入时机**：
- 开盘买入
- 按总市值由小到大排序
- 优先买入市值更小的股票

**卖出时机**：
1. **持股到期**：持股满5天自动提醒卖出
2. **技术信号**：MA5下穿MA20时提醒卖出

## 📊 策略监控

### 监控功能

小市值策略复用"低价擒牛"的监控框架，提供完整的监控服务：

- ✅ 自动跟踪持仓股票
- ✅ 每分钟扫描一次（可配置）
- ✅ 计算MA5和MA20均线
- ✅ 双重卖出信号检测
- ✅ 钉钉自动通知
- ✅ 自动移除已触发股票

### 使用流程

```
1. 执行选股
   ↓
2. 查看筛选结果
   ↓
3. 点击"➕ 加入策略监控"
   ↓
4. 进入"📊 策略监控"面板
   ↓
5. 统一管理所有监控股票
   ↓
6. 收到卖出提醒
   ↓
7. 执行卖出操作
```

## 🔔 通知功能

### 选股通知

选股完成后可以发送钉钉通知，包含：
- 筛选策略说明
- 筛选数量
- 精选股票列表
- 生成时间

### 卖出提醒

触发卖出条件时自动发送通知：
- 股票代码和名称
- 提醒类型（持股到期/MA死叉）
- 提醒原因
- 当前价格和MA数据
- 持有天数
- 卖出建议

## 💡 策略优势

### 1. 小盘优势
- **成长空间大**：小市值股票有更大的成长空间
- **灵活性强**：容易被市场关注和炒作
- **爆发力强**：小盘股涨幅潜力更大

### 2. 高成长性
- **营收增长**：营收增长率≥10%保证业务增长
- **利润爆发**：净利润增长率≥100%筛选高速成长股
- **双重保障**：营收和利润双重验证

### 3. 风险控制
- **排除ST**：避免财务风险股票
- **排除高估值板块**：不选创业板和科创板
- **仓位管理**：单股最多30%，最多持有4只

### 4. 智能监控
- **自动跟踪**：无需人工盯盘
- **双重信号**：时间+技术双重保护
- **即时通知**：钉钉消息实时接收

## 📋 与低价擒牛的对比

| 特性 | 低价擒牛 | 小市值策略 |
|------|---------|-----------|
| **筛选重点** | 股价 | 市值 |
| **价格条件** | <10元 | 无限制 |
| **市值条件** | 无限制 | ≤50亿 |
| **营收要求** | 无 | ≥10% |
| **净利增长** | ≥100% | ≥100% |
| **板块限制** | 深圳A股 | 沪深A股，非创业/科创 |
| **资金量** | 100万 | 10万 |
| **个股仓位** | 40% | 30% |
| **最大持股** | 4只 | 4只 |

## 🚀 使用示例

### 步骤1：选股

1. 点击左侧菜单"📊 小市值策略"
2. 设置筛选数量（默认5只）
3. 点击"🚀 开始小市值策略选股"
4. 等待筛选结果

### 步骤2：查看结果

筛选结果显示：
- 股票代码和名称
- 总市值
- 营收增长率
- 净利润增长率
- 所属行业
- 其他财务指标

### 步骤3：加入监控

1. 在股票详情中点击"➕ 加入策略监控"
2. 系统自动记录买入信息
3. 提示"已加入监控列表"

### 步骤4：监控管理

1. 点击右上角"📊 策略监控"
2. 查看所有监控中的股票
3. 启动监控服务
4. 等待卖出提醒

### 步骤5：接收通知

- 钉钉收到卖出提醒
- 查看提醒详情
- 执行卖出操作

## ⚙️ 配置说明

### 环境变量

小市值策略使用与低价擒牛相同的配置：

```bash
# .env文件
TDX_BASE_URL=http://192.168.1.222:8181    # TDX API地址
LOW_PRICE_BULL_SCAN_INTERVAL=60           # 扫描间隔（秒）
LOW_PRICE_BULL_HOLDING_DAYS=5             # 持股天数限制

# Webhook通知
WEBHOOK_ENABLED=true
WEBHOOK_URL=your_dingtalk_webhook_url
WEBHOOK_TYPE=dingtalk
WEBHOOK_KEYWORD=aiagents通知
```

### 监控服务

小市值策略和低价擒牛共享同一个监控服务：
- 统一的监控面板
- 统一的数据库
- 统一的提醒机制

## ⚠️ 注意事项

### 1. 风险提示
- 小盘股流动性相对较差
- 波动性较大
- 需要设置止损

### 2. 数据要求
- 需要TDX API支持
- 至少20天K线数据
- 实时数据更新

### 3. 监控服务
- 需要手动启动
- 保持系统运行
- 定期检查状态

### 4. 策略执行
- 建议分批买入
- 严格执行止损
- 不要追涨杀跌

## 📈 策略逻辑

### 选股逻辑

```
总市值≤50亿
    ↓
营收增长率≥10%
    ↓
净利润增长率≥100%
    ↓
沪深A股
    ↓
排除ST/创业板/科创板
    ↓
按总市值排序
    ↓
选择前N只
```

### 监控逻辑

```
加入监控
    ↓
记录买入信息
    ↓
每分钟扫描
    ↓
检查持股天数
    ↓
检查MA5/MA20
    ↓
触发卖出条件？
    ↓
生成提醒
    ↓
发送通知
    ↓
自动移除
```

## 🎯 适用场景

### 适合
- ✅ 寻找高成长小盘股
- ✅ 短线波段操作
- ✅ 资金量较小的投资者
- ✅ 愿意承担一定风险

### 不适合
- ❌ 追求稳健收益
- ❌ 长期价值投资
- ❌ 风险承受能力低
- ❌ 对流动性要求高

## 📚 相关文档

- [低价擒牛策略监控配置说明](./低价擒牛策略监控配置说明.md)
- [TDX API配置快速指南](./TDX_API配置快速指南.md)
- [Webhook通知配置指南](./Webhook通知配置指南.md)

---

**更新时间**：2024-12-14  
**版本**：v1.0
